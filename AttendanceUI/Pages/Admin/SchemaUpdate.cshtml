@page
@using AttendanceUI.Data
@using Microsoft.EntityFrameworkCore
@inject BiometricAttendanceDbContext Context
@{
    ViewData["Title"] = "Database Schema Update";
    string result = "";
    try
    {
        await Context.Database.ExecuteSqlRawAsync("ALTER TABLE payroll_master ADD COLUMN payable_days DECIMAL(18,2) DEFAULT 0 NOT NULL AFTER holidays");
        result = "Success! Column 'payable_days' added to 'payroll_master' table.";
    }
    catch (Exception ex)
    {
        result = "Error: " + ex.Message;
    }
}

<div class="container mt-4">
    <h1>Database Update</h1>
    <div class="alert @(result.StartsWith("Error") ? "alert-danger" : "alert-success")">
        @result
    </div>
    <p>You can now go back to <a asp-page="/Payroll/Process">Payroll Process</a>.</p>
</div>
